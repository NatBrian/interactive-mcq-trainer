/* Custom Scrollbar */
.custom-scrollbar::-webkit-scrollbar {
    width: 8px;
}

.custom-scrollbar::-webkit-scrollbar-track {
    background: #f1f5f9;
}

.dark .custom-scrollbar::-webkit-scrollbar-track {
    background: #1e293b;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
    background: #cbd5e1;
    border-radius: 4px;
}

.dark .custom-scrollbar::-webkit-scrollbar-thumb {
    background: #475569;
}

.custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: #94a3b8;
}

.dark .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: #64748b;
}

/* Animations */
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(-4px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.animate-fade-in {
    animation: fadeIn 0.3s ease-out forwards;
}

@keyframes shake {

    0%,
    100% {
        transform: translateX(0);
    }

    25% {
        transform: translateX(-4px);
    }

    75% {
        transform: translateX(4px);
    }
}

.animate-shake {
    animation: shake 0.3s ease-in-out;
}

/* Choice Styles */
.choice-label {
    display: flex;
    align-items: flex-start;
    padding: 12px 16px;
    border-radius: 8px;
    border: 1px solid #e2e8f0;
    cursor: pointer;
    transition: all 0.2s ease;
    background-color: white;
}

.dark .choice-label {
    background-color: #1e293b;
    /* slate-800 */
    border-color: #334155;
    /* slate-700 */
    color: #e2e8f0;
    /* slate-200 */
}

.choice-label:hover:not(.disabled) {
    background-color: #f8fafc;
    border-color: #cbd5e1;
}

.dark .choice-label:hover:not(.disabled) {
    background-color: #334155;
    /* slate-700 */
    border-color: #475569;
    /* slate-600 */
}

.choice-label.disabled {
    cursor: default;
    opacity: 0.8;
}

/* Radio/Checkbox custom styles */
.choice-input {
    margin-top: 0.25rem;
    margin-right: 0.75rem;
    accent-color: #0ea5e9;
    /* brand-500 */
}

/* Feedback States */
.choice-label.correct-choice {
    background-color: #dcfce7;
    /* green-100 */
    border-color: #22c55e;
    /* green-500 */
    color: #15803d;
    /* green-700 */
}

.dark .choice-label.correct-choice {
    background-color: #052e16;
    /* green-950 */
    border-color: #15803d;
    /* green-700 */
    color: #86efac;
    /* green-300 */
}

.choice-label.incorrect-choice {
    background-color: #fee2e2;
    /* red-100 */
    border-color: #ef4444;
    /* red-500 */
    color: #b91c1c;
    /* red-700 */
}

.dark .choice-label.incorrect-choice {
    background-color: #450a0a;
    /* red-950 */
    border-color: #b91c1c;
    /* red-700 */
    color: #fca5a5;
    /* red-300 */
}

.choice-label.missed-correct {
    background-color: #f0fdf4;
    /* green-50 */
    border-color: #86efac;
    /* green-300 */
    border-style: dashed;
    color: #166534;
    /* green-800 */
}

.dark .choice-label.missed-correct {
    background-color: #064e3b;
    /* green-900 */
    border-color: #22c55e;
    /* green-500 */
    color: #86efac;
    /* green-300 */
}

/* Modal Transitions */
#results-modal.visible {
    opacity: 1;
    pointer-events: auto;
}

#results-modal.visible #results-content {
    transform: scale(100%);
}

#results-modal:not(.visible) {
    pointer-events: none;
}

/* Utility */
.no-select {
    user-select: none;
}

/* Markdown Content Styles */
.question-text code,
.explanation-text code,
.choice-text code,
.result-q-text code,
.result-q-exp code {
    background-color: #f1f5f9;
    padding: 0.2em 0.4em;
    border-radius: 4px;
    font-family: monospace;
    font-size: 0.9em;
    color: #0f172a;
}

.dark .question-text code,
.dark .explanation-text code,
.dark .choice-text code,
.dark .result-q-text code,
.dark .result-q-exp code {
    background-color: #334155;
    color: #e2e8f0;
}

.question-text pre,
.explanation-text pre,
.result-q-text pre,
.result-q-exp pre {
    background-color: #f8fafc;
    padding: 1em;
    border-radius: 8px;
    overflow-x: auto;
    margin: 0.5em 0;
    border: 1px solid #e2e8f0;
}

.dark .question-text pre,
.dark .explanation-text pre,
.dark .result-q-text pre,
.dark .result-q-exp pre {
    background-color: #1e293b;
    border-color: #334155;
}

.question-text pre code,
.explanation-text pre code,
.result-q-text pre code,
.result-q-exp pre code {
    background-color: transparent;
    padding: 0;
    color: inherit;
}

.question-text blockquote,
.explanation-text blockquote,
.result-q-text blockquote,
.result-q-exp blockquote {
    border-left: 4px solid #cbd5e1;
    padding-left: 1em;
    color: #64748b;
    margin: 0.5em 0;
    font-style: italic;
}

.dark .question-text blockquote,
.dark .explanation-text blockquote,
.dark .result-q-text blockquote,
.dark .result-q-exp blockquote {
    border-color: #475569;
    color: #94a3b8;
}

.question-text ul,
.explanation-text ul,
.result-q-text ul,
.result-q-exp ul {
    list-style-type: disc;
    padding-left: 1.5em;
    margin: 0.5em 0;
}

.question-text ol,
.explanation-text ol,
.result-q-text ol,
.result-q-exp ol {
    list-style-type: decimal;
    padding-left: 1.5em;
    margin: 0.5em 0;
}

.question-text p,
.explanation-text p,
.result-q-text p,
.result-q-exp p {
    margin-bottom: 0.5em;
}

.question-text p:last-child,
.explanation-text p:last-child,
.result-q-text p:last-child,
.result-q-exp p:last-child {
    margin-bottom: 0;
}